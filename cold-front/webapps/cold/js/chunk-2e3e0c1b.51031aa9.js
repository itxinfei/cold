(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e3e0c1b"],{"1c3c":function(e,t,n){"use strict";var r=n("3d2e"),a=n.n(r);a.a},"386b":function(e,t,n){var r=n("5ca1"),a=n("79e5"),o=n("be13"),i=/"/g,s=function(e,t,n,r){var a=String(o(e)),s="<"+t;return""!==n&&(s+=" "+n+'="'+String(r).replace(i,"&quot;")+'"'),s+">"+a+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(s),r(r.P+r.F*a(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",n)}},"3d2e":function(e,t,n){e.exports={menuBg:"#ffffff",menuText:"#bfcbd9",menuActiveText:"#409EFF"}},"50fc":function(e,t,n){"use strict";n.d(t,"j",function(){return a}),n.d(t,"a",function(){return o}),n.d(t,"s",function(){return i}),n.d(t,"e",function(){return s}),n.d(t,"o",function(){return u}),n.d(t,"d",function(){return l}),n.d(t,"v",function(){return c}),n.d(t,"h",function(){return m}),n.d(t,"k",function(){return d}),n.d(t,"b",function(){return f}),n.d(t,"t",function(){return p}),n.d(t,"f",function(){return h}),n.d(t,"A",function(){return b}),n.d(t,"w",function(){return g}),n.d(t,"n",function(){return v}),n.d(t,"c",function(){return y}),n.d(t,"u",function(){return j}),n.d(t,"g",function(){return k}),n.d(t,"m",function(){return w}),n.d(t,"l",function(){return x}),n.d(t,"z",function(){return O}),n.d(t,"i",function(){return L}),n.d(t,"y",function(){return C}),n.d(t,"r",function(){return _}),n.d(t,"x",function(){return $}),n.d(t,"q",function(){return T}),n.d(t,"p",function(){return R});var r=n("b775"),a=function(e){return Object(r["a"])({url:"admin/company/list",method:"get",params:e})},o=function(e){return Object(r["a"])({url:"admin/company/save",method:"post",headers:{"Content-Type":"application/json;"},data:e})},i=function(e){return Object(r["a"])({url:"admin/company/update",method:"put",headers:{"Content-Type":"application/json;"},data:e})},s=function(e){return Object(r["a"])({url:"admin/company/delete",method:"delete",headers:{"Content-Type":"application/json;"},params:e})},u=function(e){return Object(r["a"])({url:"admin/warehouse/list",method:"get",params:e})},l=function(e){return Object(r["a"])({url:"admin/warehouse/save",method:"post",headers:{"Content-Type":"application/json;"},data:e})},c=function(e){return Object(r["a"])({url:"admin/warehouse/update",method:"put",headers:{"Content-Type":"application/json;"},data:e})},m=function(e){return Object(r["a"])({url:"admin/warehouse/delete",method:"delete",params:e})},d=function(e){return Object(r["a"])({url:"admin/host/list",method:"get",params:e})},f=function(e){return Object(r["a"])({url:"admin/host/save",method:"post",headers:{"Content-Type":"application/json;"},data:e})},p=function(e){return Object(r["a"])({url:"admin/host/update",method:"put",headers:{"Content-Type":"application/json;"},data:e})},h=function(e){return Object(r["a"])({url:"admin/host/delete",method:"delete",params:e})},b=function(e){return Object(r["a"])({url:"/admin/host/stop/".concat(e.id),method:"put",params:e})},g=function(e){return Object(r["a"])({url:"/admin/host/restart/".concat(e.id),method:"put",params:e})},v=function(e){return Object(r["a"])({url:"admin/meter/list",method:"get",params:e})},y=function(e){return Object(r["a"])({url:"admin/meter/save",method:"post",headers:{"Content-Type":"application/json;"},data:e})},j=function(e){return Object(r["a"])({url:"admin/meter/update",method:"put",headers:{"Content-Type":"application/json;"},data:e})},k=function(e){return Object(r["a"])({url:"admin/meter/delete",method:"delete",params:e})},w=function(e){return Object(r["a"])({url:"system/schedule/list",method:"get",params:e})},x=function(e){return Object(r["a"])({url:"system/schedule/info/".concat(e),method:"get",params:e})},O=function(e){return Object(r["a"])({url:"/system/schedule/".concat(e.jobId?"update":"save"),method:"post",headers:{"Content-Type":"application/json;"},data:e})},L=function(e){return Object(r["a"])({url:"system/schedule/delete",method:"post",headers:{"Content-Type":"application/json;"},data:e})},C=function(e){return Object(r["a"])({url:"system/schedule/run",method:"post",headers:{"Content-Type":"application/json;"},data:e})},_=function(e){return Object(r["a"])({url:"system/schedule/pause",method:"post",headers:{"Content-Type":"application/json;"},data:e})},$=function(e){return Object(r["a"])({url:"system/schedule/resume",method:"post",headers:{"Content-Type":"application/json;"},data:e})},T=function(e){return Object(r["a"])({url:"system/schedule/log/list",method:"get",headers:{"Content-Type":"application/json;"},params:e})},R=function(e){return Object(r["a"])({url:"/system/schedule/log/info/".concat(e),method:"get"})}},"673e":function(e,t,n){"use strict";n("386b")("sub",function(e){return function(){return e(this,"sub","","")}})},"6efc":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"topLable"},[e._m(0),n("div",{staticClass:"info"},[n("div",{staticClass:"butItem",on:{click:function(t){return e.changeHandel()}}},[e._v("+新增")]),n("el-input",{staticClass:"seach",attrs:{size:"mini",placeholder:"请输入仓库名称"},on:{input:e.getList},model:{value:e.listQuery.housename,callback:function(t){e.$set(e.listQuery,"housename",t)},expression:"listQuery.housename"}})],1)]),n("div",{staticClass:"content"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.list,"element-loading-text":"Loading"}},[n("el-table-column",{attrs:{align:"center",label:"ID",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1)+" ")]}}])}),n("el-table-column",{attrs:{label:"仪表编号",prop:"metercode"}}),n("el-table-column",{attrs:{label:"仪表名称",prop:"metername"}}),n("el-table-column",{attrs:{label:"主机名称",prop:"hostname"}}),n("el-table-column",{attrs:{label:"库房名称",prop:"housename"}}),n("el-table-column",{attrs:{label:"企业名称",prop:"companyname"}}),n("el-table-column",{attrs:{label:"温度阈值",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.mintem)+" / "+e._s(t.row.maxtem))]}}])}),n("el-table-column",{attrs:{label:"湿度阈值",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.minhum)+" / "+e._s(t.row.maxhum))]}}])}),n("el-table-column",{attrs:{label:"采集间隔",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.meterinterval)+" s")]}}])}),n("el-table-column",{attrs:{label:"状态",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(0==t.row.meterstatus?"停用":1==t.row.meterstatus?"启用":"异常")+" ")]}}])}),n("el-table-column",{attrs:{label:"操作",prop:"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"action",on:{click:function(n){return e.changeHandel(t.row)}}},[e._v(" 修改 ")]),n("span",{staticClass:"action",on:{click:function(n){return e.delHandel(t.row.id)}}},[e._v(" 删除 ")])]}}])})],1),n("el-pagination",{staticClass:"pageList",attrs:{background:"",layout:"prev, pager, next",total:Number(e.total)},on:{"current-change":e.handleCurrentChange}})],1),n("el-dialog",{staticClass:"meterAdd",attrs:{title:e.title,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,inline:!0,size:"mini"}},[n("el-form-item",{staticStyle:{display:"none"}},[n("el-input",{attrs:{type:"hidden",autocomplete:"off"},model:{value:e.form.companyname,callback:function(t){e.$set(e.form,"companyname",t)},expression:"form.companyname"}}),n("el-input",{attrs:{type:"hidden",autocomplete:"off"},model:{value:e.form.housecode,callback:function(t){e.$set(e.form,"housecode",t)},expression:"form.housecode"}}),n("el-input",{attrs:{type:"hidden",autocomplete:"off"},model:{value:e.form.housename,callback:function(t){e.$set(e.form,"housename",t)},expression:"form.housename"}}),n("el-input",{attrs:{type:"hidden",autocomplete:"off"},model:{value:e.form.hostcode,callback:function(t){e.$set(e.form,"hostcode",t)},expression:"form.hostcode"}}),n("el-input",{attrs:{type:"hidden",autocomplete:"off"},model:{value:e.form.hostname,callback:function(t){e.$set(e.form,"hostname",t)},expression:"form.hostname"}})],1),n("el-form-item",{attrs:{label:"仪表名称:",prop:"metername","label-width":e.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off",placeholder:"请输入仪表名称"},model:{value:e.form.metername,callback:function(t){e.$set(e.form,"metername",t)},expression:"form.metername"}})],1),n("el-form-item",{attrs:{label:"仪表编号:",prop:"metercode","label-width":e.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off",placeholder:"请输入仪表编号"},model:{value:e.form.metercode,callback:function(t){e.$set(e.form,"metercode",t)},expression:"form.metercode"}})],1),n("el-form-item",{attrs:{label:"企业名称:",prop:"companyid",size:"mini","label-width":e.formLabelWidth}},[n("el-select",{attrs:{placeholder:"请选择企业"},model:{value:e.form.companyid,callback:function(t){e.$set(e.form,"companyid",t)},expression:"form.companyid"}},e._l(e.companyList,function(t){return n("el-option",{key:t.id,attrs:{label:t.company,value:t.id},nativeOn:{click:function(n){return e.companyChange(t)}}})}),1)],1),n("el-form-item",{attrs:{label:"仓库名称:",prop:"houseid","label-width":e.formLabelWidth}},[n("el-select",{attrs:{placeholder:"请选择库房"},model:{value:e.form.houseid,callback:function(t){e.$set(e.form,"houseid",t)},expression:"form.houseid"}},e._l(e.storehouseList,function(t){return n("el-option",{key:t.id,attrs:{label:t.housename,value:t.id},nativeOn:{click:function(n){return e.houseChange(t)}}})}),1)],1),n("el-form-item",{attrs:{label:"管理主机:",prop:"hostid","label-width":e.formLabelWidth}},[n("el-select",{attrs:{placeholder:"请选择管理主机"},model:{value:e.form.hostid,callback:function(t){e.$set(e.form,"hostid",t)},expression:"form.hostid"}},e._l(e.hostList,function(t){return n("el-option",{key:t.id,attrs:{label:t.hostname,value:t.id},nativeOn:{click:function(n){return e.hostChange(t)}}})}),1)],1),n("el-form-item",{attrs:{label:"仪表状态:",prop:"meterstatus","label-width":e.formLabelWidth}},[n("el-select",{attrs:{placeholder:"请选择仪表状态"},model:{value:e.form.meterstatus,callback:function(t){e.$set(e.form,"meterstatus",t)},expression:"form.meterstatus"}},[n("el-option",{attrs:{label:"在用",value:"1"}}),n("el-option",{attrs:{label:"停用",value:"0"}}),n("el-option",{attrs:{label:"异常",value:"2"}})],1)],1),n("el-form-item",{attrs:{label:"温度上限",prop:"maxtem","label-width":e.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off",placeholder:"请输入"},model:{value:e.form.maxtem,callback:function(t){e.$set(e.form,"maxtem",t)},expression:"form.maxtem"}})],1),n("el-form-item",{attrs:{label:"温度下限",prop:"mintem","label-width":e.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off",placeholder:"请输入"},model:{value:e.form.mintem,callback:function(t){e.$set(e.form,"mintem",t)},expression:"form.mintem"}})],1),n("el-form-item",{attrs:{label:"湿度上限",prop:"maxhum","label-width":e.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off",placeholder:"请输入"},model:{value:e.form.maxhum,callback:function(t){e.$set(e.form,"maxhum",t)},expression:"form.maxhum"}})],1),n("el-form-item",{attrs:{label:"湿度下限",prop:"minhum","label-width":e.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off",placeholder:"请输入"},model:{value:e.form.minhum,callback:function(t){e.$set(e.form,"minhum",t)},expression:"form.minhum"}})],1),n("el-form-item",{attrs:{label:"采集间隔",prop:"meterinterval","label-width":e.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off",placeholder:"请输入"},model:{value:e.form.meterinterval,callback:function(t){e.$set(e.form,"meterinterval",t)},expression:"form.meterinterval"}})],1),n("el-form-item",{attrs:{label:"备注信息","label-width":e.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off",placeholder:"请输入"},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.submitHandle}},[e._v("保存")])],1)],1)],1)},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tit"},[n("span",[n("i",{staticClass:"icon"},[e._v("")]),e._v(" 仪表管理")])])}],o=(n("673e"),n("96cf"),n("3b8d")),i=n("cebc"),s=n("d225"),u=n("b0b4"),l=n("308d"),c=n("6bb5"),m=n("4e2b"),d=n("9ab4"),f=n("60a3"),p=n("50fc"),h=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.list=[],e.listLoading=!0,e.dialogFormVisible=!1,e.title="新增仪表",e.total=0,e.sub="",e.companyList=[],e.storehouseList=[],e.hostList=[],e.listQuery={page:1,pagesize:10,housename:""},e.getListQuery={page:1,pagesize:100},e.initForm={metercode:"",metername:"",hostid:"",hostcode:"",hostname:"",houseid:"",housecode:"",housename:"",companyid:"",companyname:"",meterinterval:"",meterstatus:"",mintem:"",maxtem:"",minhum:"",maxhum:"",remarks:""},e.form=Object(i["a"])({},e.initForm),e.formLabelWidth="120px",e.rules={metercode:[{required:!0,message:"请输入仪表编号",trigger:"blur"}],metername:[{required:!0,message:"请输入仪表名",trigger:"blur"}],hostid:[{required:!0,message:"请选择主机",trigger:"change"}],houseid:[{required:!0,message:"请选择库房",trigger:"change"}],companyid:[{required:!0,message:"请选择使用企业",trigger:"change"}],meterstatus:[{required:!0,message:"请选择仪表状态",trigger:"change"}],mintem:[{required:!0,message:"请输入温度下限",trigger:"blur"}],maxtem:[{required:!0,message:"请输入温度上限",trigger:"blur"}],minhum:[{required:!0,message:"请输入湿度下限",trigger:"blur"}],maxhum:[{required:!0,message:"请输入湿度上限",trigger:"blur"}],meterinterval:[{required:!0,message:"请输入采集间隔",trigger:"blur"}]},e}return Object(m["a"])(t,e),Object(u["a"])(t,[{key:"created",value:function(){this.getList(),this.getCompanyList(),this.getStorehouseList(),this.getHostList()}},{key:"companyChange",value:function(e){this.form.companyname=e.company}},{key:"houseChange",value:function(e){this.form.housecode=e.housecode,this.form.housename=e.housename}},{key:"hostChange",value:function(e){this.form.hostcode=e.hostcode,this.form.hostname=e.hostname}},{key:"getCompanyList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["j"])(this.getListQuery);case 2:t=e.sent,n=t.data,this.companyList=n.items;case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getStorehouseList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["o"])(this.getListQuery);case 2:t=e.sent,n=t.data,this.storehouseList=n.items;case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getHostList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["k"])(this.getListQuery);case 2:t=e.sent,n=t.data,this.hostList=n.items;case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.listLoading=!0,e.next=3,Object(p["n"])(this.listQuery);case 3:t=e.sent,n=t.data,this.list=n.items,this.total=n.total,this.listLoading=!1;case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"changeHandel",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.dialogFormVisible=!0,t?(this.title="修改仪表",this.sub="put",this.form=t):(this.title="新增仪表",this.sub="add",this.form=this.initForm);case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"submitHandle",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$refs.form.validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(n){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!n){e.next=13;break}if("add"!==t.sub){e.next=8;break}return e.next=4,Object(p["c"])(t.form);case 4:r=e.sent,200===r.status&&(t.$message({type:"success",message:"添加成功!"}),t.getList()),e.next=12;break;case 8:return e.next=10,Object(p["u"])(t.form);case 10:a=e.sent,200===a.status&&(t.$message({type:"success",message:"修改成功!"}),t.getList());case 12:t.dialogFormVisible=!1;case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"delHandel",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$confirm("确定要删除该仪表？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=Object(p["g"])({id:t});e&&(n.$message({type:"success",message:"删除成功!"}),n.getList())}).catch(function(){n.$message({type:"info",message:"已取消删除"})});case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"handleCurrentChange",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.listQuery.page=t,this.getList();case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}]),t}(f["c"]);h=d["a"]([Object(f["a"])({name:"Meter",filters:{parseTime:function(e){return new Date(e).toISOString()}}})],h);var b=h,g=b,v=(n("1c3c"),n("8438"),n("2877")),y=Object(v["a"])(g,r,a,!1,null,"4e24679c",null);t["default"]=y.exports},8438:function(e,t,n){"use strict";var r=n("ec9d"),a=n.n(r);a.a},ec9d:function(e,t,n){}}]);
//# sourceMappingURL=chunk-2e3e0c1b.51031aa9.js.map